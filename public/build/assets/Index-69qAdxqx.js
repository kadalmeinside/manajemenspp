import{A as T}from"./AuthenticatedLayout-Cj380sGa.js";import{a as d,o as r,d as e,D as j,c as m,m as D,Q as k,b as u,u as n,g as L,w as h,e as x,F as g,r as f,t as s,n as c,f as b,i as M,G as C,S as H}from"./app-DjrHdLha.js";import"./ApplicationLogo-C-GJqSY-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserCircleIcon-BHGiOHgt.js";import"./ArrowPathIcon-Ow_otJ6l.js";import"./CheckCircleIcon-DpeA9miC.js";import"./XCircleIcon-BevXD7wu.js";function v(l,p){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})])}const V={class:"flex justify-between items-center"},A={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},N={class:"pb-12 pt-4"},E={class:"max-w-7xl mx-auto"},I={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},O={class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},F={class:"divide-y divide-gray-200 dark:divide-gray-700"},J={key:0},P={class:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white"},Q={class:"px-6 py-4 whitespace-nowrap text-sm"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},$={class:"flex items-center"},G={class:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 mr-3"},U={class:"text-xs text-gray-500"},W={class:"px-6 py-4 text-xs max-w-sm text-gray-500 dark:text-gray-400 break-words"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},K={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},R={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},X={class:"flex flex-wrap -mb-1 justify-center"},Y=["innerHTML"],ne={__name:"Index",props:{jobBatches:Object,pageTitle:String},setup(l){const p=j(),_=l,y=m(()=>p.props.auth.user),o=m(()=>_.jobBatches||{data:[],links:[]}),w=a=>a==="finished"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":a==="processing"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":a==="failed"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400",B=a=>a?new Date(a).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return D(()=>{window.Echo&&y.value&&window.Echo.private(`App.Models.User.${y.value.id}`).listen(".mass-invoice.status",a=>{console.log("Job status event received on Jobs/Index page:",a),k.reload({preserveScroll:!0,only:["jobBatches"]})})}),(a,i)=>(r(),d(g,null,[u(n(L),{title:l.pageTitle},null,8,["title"]),u(T,null,{header:h(()=>[e("div",V,[e("h2",A,s(l.pageTitle),1),e("button",{onClick:i[0]||(i[0]=t=>n(k).reload({only:["jobBatches"]})),class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition"},[u(n(v),{class:"h-5 w-5 text-gray-500 dark:text-gray-400"})])])]),default:h(()=>[e("div",N,[e("div",E,[e("div",I,[e("div",O,[e("table",z,[i[2]||(i[2]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Nama Proses"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Progress"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Output / Hasil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Dimulai Oleh"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Waktu Selesai")])],-1)),e("tbody",F,[!o.value.data||o.value.data.length===0?(r(),d("tr",J,i[1]||(i[1]=[e("td",{colspan:"6",class:"px-6 py-10 text-center text-sm text-gray-500 dark:text-gray-400"},"Tidak ada riwayat proses yang tercatat.",-1)]))):x("",!0),(r(!0),d(g,null,f(o.value.data,t=>(r(),d("tr",{key:t.id},[e("td",P,s(t.name),1),e("td",Q,[e("span",{class:c([w(t.status),"px-2.5 py-0.5 rounded-full text-xs font-semibold"])},[t.status==="processing"?(r(),b(n(v),{key:0,class:"h-4 w-4 inline-block mr-1 animate-spin"})):x("",!0),M(" "+s(t.status),1)],2)]),e("td",Z,[e("div",$,[e("div",G,[e("div",{class:c(["h-2.5 rounded-full",{"bg-blue-600":t.status==="processing","bg-green-600":t.status==="finished","bg-red-600":t.status==="failed"}]),style:C({width:t.progress+"%"})},null,6)]),e("span",null,s(t.progress)+"%",1)]),e("span",U,s(t.processed_items)+" / "+s(t.total_items)+" item",1)]),e("td",W,s(t.output),1),e("td",q,s(t.user_name),1),e("td",K,s(B(t.finished_at)),1)]))),128))])])]),o.value.links&&o.value.links.length>3?(r(),d("div",R,[e("div",X,[(r(!0),d(g,null,f(o.value.links,(t,S)=>(r(),d(g,{key:S},[t.url===null?(r(),d("div",{key:0,class:"mr-1 mb-1 px-3 py-2 text-sm leading-4 text-gray-400 dark:text-gray-500 border rounded dark:border-gray-600 select-none",innerHTML:t.label},null,8,Y)):(r(),b(n(H),{key:1,class:c(["mr-1 mb-1 px-3 py-2 text-sm leading-4 border rounded dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:border-indigo-500 dark:focus:border-indigo-700 focus:text-indigo-500 dark:focus:text-indigo-300",{"bg-indigo-500 text-white dark:bg-indigo-600 dark:text-white dark:border-indigo-700":t.active}]),href:t.url,innerHTML:t.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):x("",!0)])])])]),_:1})],64))}};export{ne as default};
