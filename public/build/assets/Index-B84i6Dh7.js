import{c as n,b as d,e,G as H,k as P,r as b,x as O,d as l,u as o,g as R,w as u,j as x,l as Q,F as C,f as B,t as r,n as W,m as z,C as y,D as M,L as G,H as L,Q as Y}from"./app-lo7b8J9h.js";import{A as Z}from"./AuthenticatedLayout-DfkN8Ykd.js";import{_ as T,a as S}from"./SecondaryButton-Ce7HpwLn.js";import{P as U}from"./PrimaryButton-Ct87OL4D.js";import{D as J}from"./DangerButton-lOCLdq4K.js";import{_ as p,a as f,b as g}from"./TextInput-G837rKFq.js";import{_ as X}from"./Toast-D_FhrU92.js";import{_ as ee}from"./Pagination-Bc_K82Jh.js";import"./ApplicationLogo-CVLqXZiY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CJMmfBol.js";import"./ArrowPathIcon-BfftkvQP.js";import"./CheckCircleIcon-CiDQtB2A.js";import"./XCircleIcon-DVnp3z6s.js";import"./UsersIcon-BfG32PSN.js";import"./XMarkIcon-CyhsEiSP.js";import"./ChevronDownIcon-DGbIcL3m.js";import"./ChevronRightIcon-Ck2YXiSd.js";import"./InformationCircleIcon-Clr6GlgG.js";import"./ExclamationTriangleIcon-DVAgUDly.js";import"./CheckCircleIcon-BJ8CvQET.js";function te(m,_){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function ae(m,_){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function se(m,_){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const le={class:"flex justify-between items-center"},oe={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},ie={class:"pb-12 pt-4"},re={class:"max-w-full mx-auto"},ne={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},de={class:"p-6 pb-0 text-gray-900 dark:text-gray-100"},me={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},ue={class:"flex items-center gap-2"},pe={class:"px-6 overflow-x-auto"},ge={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ce={class:"divide-y divide-gray-200 dark:divide-gray-700"},_e={key:0},ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ye={key:0,class:"font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},fe={key:1,class:"text-gray-400 italic"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},be={key:0},we={key:1},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm"},De={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Pe=["onClick"],Be=["onClick"],Me={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6 border-b pb-3 dark:border-gray-700"},Le={class:"space-y-6"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se=["value"],Ue={class:"flex items-center space-x-2"},$e={class:"mt-2 flex items-center space-x-4"},Ae={class:"flex items-center"},je={class:"flex items-center"},Ne={class:"mt-6 flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"},qe={class:"p-6"},Ke={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},Ee={class:"mt-6 flex justify-end space-x-3"},nt={__name:"Index",props:{pageTitle:String,promoList:Object,allKelas:Array},setup(m){const _=H(),$=P(()=>{var i;return(i=_.props.flash)==null?void 0:i.message}),A=P(()=>{var i;return((i=_.props.flash)==null?void 0:i.type)||"info"}),v=b(!1),k=b(!1),c=b(null),w=b(!1),t=O({id_kelas:"",nama_promo:"",kode_promo:"",tipe_diskon:"tetap",nilai_diskon:0,tanggal_mulai:"",tanggal_berakhir:null,berlaku_selamanya:!1,is_active:!0}),j=()=>{k.value=!1,t.reset(),t.is_active=!0,t.tipe_diskon="tetap",v.value=!0},N=i=>{k.value=!0,c.value=i,t.id_kelas=i.id_kelas,t.nama_promo=i.nama_promo,t.kode_promo=i.kode_promo,t.tipe_diskon=i.tipe_diskon,t.nilai_diskon=i.nilai_diskon,t.tanggal_mulai=i.tanggal_mulai,t.tanggal_berakhir=i.tanggal_berakhir,t.berlaku_selamanya=i.tanggal_berakhir===null,t.is_active=i.is_active,v.value=!0},h=()=>{v.value=!1,t.reset(),t.clearErrors()},q=()=>{t.berlaku_selamanya&&(t.tanggal_berakhir=null),k.value?t.put(route("admin.promos.update",c.value.id),{onSuccess:()=>h()}):t.post(route("admin.promos.store"),{onSuccess:()=>h()})},K=i=>{c.value=i,w.value=!0},V=()=>{w.value=!1,c.value=null},E=()=>{Y.delete(route("admin.promos.destroy",c.value.id),{onSuccess:()=>V()})},F=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i),D=i=>i?new Date(i).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-";return(i,a)=>(d(),n(C,null,[l(o(R),{title:m.pageTitle},null,8,["title"]),l(Z,null,{header:u(()=>[e("div",le,[e("h2",oe,r(m.pageTitle),1)])]),default:u(()=>[l(X,{message:$.value,type:A.value},null,8,["message","type"]),e("div",ie,[e("div",re,[e("div",ne,[e("div",de,[e("div",me,[e("div",ue,[l(U,{onClick:j},{default:u(()=>[l(o(ae),{class:"h-5 w-5 mr-2"}),a[10]||(a[10]=x(" Tambah Promo "))]),_:1,__:[10]})])])]),e("div",pe,[e("table",ge,[a[12]||(a[12]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Promo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Kode"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Kelas"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Diskon"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Periode Aktif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi")])],-1)),e("tbody",ce,[m.promoList.data.length===0?(d(),n("tr",_e,a[11]||(a[11]=[e("td",{colspan:"7",class:"px-6 py-10 text-center text-gray-500"},"Belum ada data promo.",-1)]))):Q("",!0),(d(!0),n(C,null,B(m.promoList.data,s=>(d(),n("tr",{key:s.id},[e("td",ke,r(s.nama_promo),1),e("td",xe,[s.kode_promo?(d(),n("span",ye,r(s.kode_promo),1)):(d(),n("span",fe,"Otomatis"))]),e("td",ve,r(s.kelas.nama_kelas),1),e("td",he,[s.tipe_diskon==="persen"?(d(),n("span",be,r(s.nilai_diskon)+"%",1)):(d(),n("span",we,r(F(s.nilai_diskon)),1))]),e("td",Ve,r(D(s.tanggal_mulai))+" - "+r(s.tanggal_berakhir?D(s.tanggal_berakhir):"Selamanya"),1),e("td",Ce,[e("span",{class:W(["px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},r(s.is_active?"Aktif":"Tidak Aktif"),3)]),e("td",De,[e("button",{onClick:I=>N(s),class:"text-indigo-600 hover:text-indigo-900"},[l(o(te),{class:"h-5 w-5"})],8,Pe),e("button",{onClick:I=>K(s),class:"text-red-600 hover:text-red-900"},[l(o(se),{class:"h-5 w-5"})],8,Be)])]))),128))])])]),l(ee,{links:m.promoList.links,class:"p-6"},null,8,["links"])])])]),l(T,{show:v.value,onClose:h,maxWidth:"2xl"},{default:u(()=>[e("form",{onSubmit:z(q,["prevent"]),class:"p-6"},[e("h2",Me,r(k.value?"Edit Promo":"Tambah Promo Baru"),1),e("div",Le,[e("div",Te,[e("div",null,[l(p,{for:"nama_promo",value:"Nama Promo",required:""}),l(f,{id:"nama_promo",modelValue:o(t).nama_promo,"onUpdate:modelValue":a[0]||(a[0]=s=>o(t).nama_promo=s),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(g,{message:o(t).errors.nama_promo,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"kode_promo",value:"Kode Promo (Opsional)"}),l(f,{id:"kode_promo",modelValue:o(t).kode_promo,"onUpdate:modelValue":a[1]||(a[1]=s=>o(t).kode_promo=s),type:"text",class:"mt-1 block w-full",placeholder:"Biarkan kosong untuk promo otomatis"},null,8,["modelValue"]),l(g,{message:o(t).errors.kode_promo,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"id_kelas",value:"Berlaku untuk Kelas",required:""}),y(e("select",{id:"id_kelas","onUpdate:modelValue":a[2]||(a[2]=s=>o(t).id_kelas=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[a[13]||(a[13]=e("option",{value:"",disabled:""},"Pilih Kelas",-1)),(d(!0),n(C,null,B(m.allKelas,s=>(d(),n("option",{key:s.id_kelas,value:s.id_kelas},r(s.nama_kelas),9,Se))),128))],512),[[M,o(t).id_kelas]]),l(g,{message:o(t).errors.id_kelas,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"tipe_diskon",value:"Tipe Diskon",required:""}),y(e("select",{id:"tipe_diskon","onUpdate:modelValue":a[3]||(a[3]=s=>o(t).tipe_diskon=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},a[14]||(a[14]=[e("option",{value:"tetap"},"Nominal Tetap (Rp)",-1),e("option",{value:"persen"},"Persentase (%)",-1)]),512),[[M,o(t).tipe_diskon]]),l(g,{message:o(t).errors.tipe_diskon,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"nilai_diskon",value:"Nilai Diskon",required:""}),l(f,{id:"nilai_diskon",modelValue:o(t).nilai_diskon,"onUpdate:modelValue":a[4]||(a[4]=s=>o(t).nilai_diskon=s),modelModifiers:{number:!0},type:"number",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(g,{message:o(t).errors.nilai_diskon,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"tanggal_mulai",value:"Tanggal Mulai",required:""}),l(f,{id:"tanggal_mulai",modelValue:o(t).tanggal_mulai,"onUpdate:modelValue":a[5]||(a[5]=s=>o(t).tanggal_mulai=s),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(g,{message:o(t).errors.tanggal_mulai,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"tanggal_berakhir",value:"Tanggal Berakhir (Opsional)"}),l(f,{id:"tanggal_berakhir",modelValue:o(t).tanggal_berakhir,"onUpdate:modelValue":a[6]||(a[6]=s=>o(t).tanggal_berakhir=s),type:"date",class:"mt-1 block w-full",disabled:o(t).berlaku_selamanya},null,8,["modelValue","disabled"]),l(g,{message:o(t).errors.tanggal_berakhir,class:"mt-2"},null,8,["message"])]),e("div",Ue,[y(e("input",{id:"berlaku_selamanya","onUpdate:modelValue":a[7]||(a[7]=s=>o(t).berlaku_selamanya=s),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[G,o(t).berlaku_selamanya]]),a[15]||(a[15]=e("label",{for:"berlaku_selamanya",class:"text-sm text-gray-700 dark:text-gray-300"},"Berlaku Selamanya",-1))]),e("div",null,[l(p,{value:"Status"}),e("div",$e,[e("label",Ae,[y(e("input",{type:"radio","onUpdate:modelValue":a[8]||(a[8]=s=>o(t).is_active=s),value:!0,class:"text-indigo-600"},null,512),[[L,o(t).is_active]]),a[16]||(a[16]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Aktif",-1))]),e("label",je,[y(e("input",{type:"radio","onUpdate:modelValue":a[9]||(a[9]=s=>o(t).is_active=s),value:!1,class:"text-indigo-600"},null,512),[[L,o(t).is_active]]),a[17]||(a[17]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Tidak Aktif",-1))])])])])]),e("div",Ne,[l(S,{onClick:h,type:"button"},{default:u(()=>a[18]||(a[18]=[x("Batal")])),_:1,__:[18]}),l(U,{disabled:o(t).processing},{default:u(()=>[x(r(k.value?"Update Promo":"Simpan Promo"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show"]),l(T,{show:w.value,onClose:V,maxWidth:"lg"},{default:u(()=>{var s;return[e("div",qe,[a[21]||(a[21]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Hapus Promo",-1)),e("p",Ke,' Anda yakin ingin menghapus promo "'+r((s=c.value)==null?void 0:s.nama_promo)+'"? Tindakan ini tidak dapat diurungkan. ',1),e("div",Ee,[l(S,{onClick:V},{default:u(()=>a[19]||(a[19]=[x("Batal")])),_:1,__:[19]}),l(J,{onClick:E},{default:u(()=>a[20]||(a[20]=[x("Ya, Hapus")])),_:1,__:[20]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{nt as default};
