import{c as i,b as r,e as a,G as Me,k as j,r as h,x as U,y as ie,o as Ce,d as l,u as s,g as Se,w as m,C as c,F as _,f as y,t as u,D as b,h as oe,l as k,j as v,n as V,S as Ve,m as ee,H as N,Q as Be}from"./app-D0o-brb1.js";import{A as Pe}from"./AuthenticatedLayout-C9PPZ3E7.js";import{P as q}from"./PrimaryButton-njev7k2E.js";import{_ as $,a as z}from"./SecondaryButton-l6NCZKTK.js";import{D as De}from"./DangerButton-JaZqdfJr.js";import{a as M,_ as f,b as p}from"./TextInput-Cf_rUTQB.js";import{_ as ae}from"./Checkbox-BXLhUDLP.js";import{_ as Ae}from"./Toast-CcQdpZma.js";import{_ as Te}from"./DropdownLink-BwHQAyRw.js";import{l as Ie}from"./lodash-CT3ee9Ix.js";import{r as Fe}from"./PlusIcon-CZO3TUjX.js";import{r as Ue}from"./EyeIcon-CEtLi1ax.js";import{r as qe}from"./XCircleIcon-DUgSW6_t.js";import{r as $e}from"./ArrowPathIcon-DzpBG5w-.js";import"./ApplicationLogo-y86sr9v3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ArrowPathIcon-Ct501NdJ.js";import"./CheckCircleIcon-CP3PcNC0.js";import"./XCircleIcon-fG0Ya-HE.js";import"./UsersIcon-INdzScBP.js";import"./XMarkIcon-BaBT_vZr.js";import"./ChevronDownIcon-BXiT8n2L.js";import"./ChevronRightIcon-HVMDgnPF.js";import"./InformationCircleIcon-DA1qMrsf.js";import"./ExclamationTriangleIcon-C7Trwj7M.js";import"./CheckCircleIcon-rX5rZzi0.js";function ze(ne,x){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const Le={class:"pb-12 pt-4"},Ke={class:"max-w-full mx-auto"},Ee={class:"mb-6 p-4 bg-white dark:bg-gray-800 shadow-md sm:rounded-lg"},Ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},He=["value"],Ye=["value"],Je={class:"md:col-span-1 flex md:justify-end"},Re={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},We={class:"overflow-x-auto"},Ge={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Oe={class:"divide-y divide-gray-200 dark:divide-gray-700"},Xe={key:0},Qe={class:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white"},Ze={class:"text-xs text-gray-500"},ea={class:"px-6 py-4 whitespace-nowrap text-sm"},aa={class:"font-medium text-gray-900 dark:text-white"},ta={class:"text-gray-500"},sa={class:"px-6 py-4 text-sm text-gray-500"},la={class:"px-6 py-4 text-sm text-gray-500"},ra={class:"px-6 py-4 text-sm"},ia={class:"px-6 py-4 text-sm text-gray-500"},oa={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},na={class:"flex items-center justify-end space-x-2"},da=["href"],ua=["onClick"],ma=["onClick"],ga={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},pa={class:"flex flex-wrap -mb-1 justify-center"},ca=["innerHTML"],_a={class:"p-6 relative"},fa={key:0,class:"absolute inset-0 bg-white/70 dark:bg-gray-800/70 flex items-center justify-center z-20 rounded-lg"},ya={class:"mt-6 flex justify-end space-x-3"},ka={class:"p-6 relative"},ha={key:0,class:"absolute inset-0 bg-white/70 dark:bg-gray-800/70 flex items-center justify-center z-20 rounded-lg"},ba={class:"mt-6 flex justify-end space-x-3"},xa={key:0,class:"absolute inset-0 bg-white/70 dark:bg-gray-800/70 z-50 flex items-center justify-center rounded-lg"},va={class:"p-6"},wa=["value"],ja={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Ma=["value"],Ca=["value"],Sa={class:"flex items-center"},Va={class:"mt-6 flex justify-end space-x-3 pt-6 border-t dark:border-gray-700"},Ba={key:0},Pa={key:1},Da={key:0,class:"absolute inset-0 bg-white/70 dark:bg-gray-800/70 z-50 flex items-center justify-center rounded-lg"},Aa={class:"p-6"},Ta=["value"],Ia={class:"grid grid-cols-2 gap-6"},Fa=["value"],Ua=["value"],qa={class:"mt-2 space-y-2"},$a={class:"flex items-center"},za={class:"flex items-center"},La={key:0,class:"mt-2"},Ka={class:"mt-2 space-y-2"},Ea={class:"flex items-center"},Na={class:"flex items-center"},Ha={key:0,class:"mt-2"},Ya={class:"mt-4"},Ja={class:"flex items-center"},Ra={class:"mt-6 flex justify-end space-x-3 pt-6 border-t dark:border-gray-700"},Wa={key:0},Ga={key:1},Oa={key:0,class:"absolute inset-0 bg-white/70 dark:bg-gray-800/70 z-50 flex items-center justify-center rounded-lg"},Xa={class:"p-6"},Qa={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Za=["value"],et=["value"],at={class:"mt-4"},tt={class:"flex items-center"},st={class:"mt-6 flex justify-end space-x-3 pt-6 border-t dark:border-gray-700"},lt={key:0},rt={key:1},At={__name:"Index",setup(ne){const x=Me(),B=j(()=>x.props.invoiceList||{data:[],links:[],current_page:1,total:0,per_page:10}),P=j(()=>x.props.filters||{search:"",kelas_id:"",status:""}),te=j(()=>x.props.allSiswa||[]),H=j(()=>x.props.allKelas||[]),de=j(()=>x.props.allStatus||[]),Y=j(()=>x.props.can||{}),ue=j(()=>{var d;return(d=x.props.flash)==null?void 0:d.message}),me=j(()=>{var d;return((d=x.props.flash)==null?void 0:d.type)||"info"}),J=h(!1),R=h(!1),W=h(!1),D=h(!1),L=h(null),A=h(!1),K=h(null),se=new Date().getFullYear(),G=Array.from({length:10},(d,e)=>se-5+e),O=Array.from({length:12},(d,e)=>({value:e+1,name:new Date(0,e).toLocaleString("id-ID",{month:"long"})}));new Date(se,new Date().getMonth()+1,10).toISOString().slice(0,10);const n=U({id_siswa:"",periode_tagihan_bulan:new Date().getMonth()+1,periode_tagihan_tahun:new Date().getFullYear(),jumlah_spp_ditagih:"",admin_fee_ditagih:0,tanggal_jatuh_tempo:new Date(new Date().getFullYear(),new Date().getMonth()+1,10).toISOString().slice(0,10),send_whatsapp_notif:!0}),o=U({id_kelas:"",periode_tagihan_bulan:new Date().getMonth()+1,periode_tagihan_tahun:new Date().getFullYear(),tanggal_jatuh_tempo:new Date(new Date().getFullYear(),new Date().getMonth()+1,10).toISOString().slice(0,10),jenis_jumlah_spp:"default",jumlah_spp_manual:null,jenis_admin_fee:"default",admin_fee_manual:null,send_whatsapp_notif:!0}),g=U({periode_tagihan_bulan:new Date().getMonth()+1,periode_tagihan_tahun:new Date().getFullYear(),tanggal_jatuh_tempo:new Date(new Date().getFullYear(),new Date().getMonth()+1,10).toISOString().slice(0,10),send_whatsapp_notif:!0}),C=U({}),S=U({}),T=h(P.search||""),I=h(P.kelas_id||""),F=h(P.status||""),ge=()=>{Be.get(route("admin.invoices.index"),{search:T.value,kelas_id:I.value,status:F.value,page:1},{preserveState:!0,preserveScroll:!0,replace:!0,only:["invoiceList","filters"]})};ie([T,I,F],Ie.debounce(ge,300));const pe=()=>{n.reset(),J.value=!0},X=()=>{J.value=!1},ce=()=>{o.reset(),R.value=!0},Q=()=>{R.value=!1},_e=()=>{g.reset(),W.value=!0},Z=()=>{W.value=!1};ie(()=>n.id_siswa,d=>{if(d){const e=te.value.find(w=>w.id_siswa===d);if(e){if(e.jumlah_spp_custom>0)n.jumlah_spp_ditagih=parseFloat(e.jumlah_spp_custom);else if(e.id_kelas){const w=H.value.find(t=>t.id_kelas===e.id_kelas);n.jumlah_spp_ditagih=w&&w.biaya_spp_default>0?parseFloat(w.biaya_spp_default):""}else n.jumlah_spp_ditagih="";n.admin_fee_ditagih=parseFloat(e.admin_fee_custom)||0}}});const fe=()=>{n.post(route("admin.invoices.store"),{preserveScroll:!0,onFinish:()=>{X()}})},ye=()=>{o.post(route("admin.invoices.bulk_store"),{preserveScroll:!0,onFinish:()=>{Q()}})},ke=()=>{g.post(route("admin.invoices.bulk_store_all"),{preserveScroll:!0,onFinish:()=>{Z()}})},he=d=>{L.value=d,D.value=!0},be=()=>{L.value&&C.delete(route("admin.invoices.destroy",L.value.id),{preserveScroll:!0,onFinish:()=>{D.value=!1,L.value=null}})},xe=d=>{K.value=d,A.value=!0},ve=()=>{K.value&&S.post(route("admin.invoices.recreate",K.value.id),{preserveScroll:!0,onFinish:()=>{A.value=!1,K.value=null}})};Ce(()=>{const d=new URLSearchParams(window.location.search);T.value=d.get("search")||P.search||"",I.value=d.get("kelas_id")||P.kelas_id||"",F.value=d.get("status")||P.status||""});const we=d=>d==="PAID"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":d==="PENDING"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":d==="EXPIRED"||d==="FAILED"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",le=d=>{if(!d)return{main:"",detail:""};const e=d.split(" - ");return e.length>1?{main:e[0],detail:e.slice(1).join(" - ")}:{main:d,detail:""}};return(d,e)=>(r(),i(_,null,[l(s(Se),{title:"Manajemen Invoice"}),l(Pe,null,{header:m(()=>e[29]||(e[29]=[a("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Invoice & Tagihan",-1)])),default:m(()=>{var w;return[l(Ae,{message:ue.value,type:me.value},null,8,["message","type"]),a("div",Le,[a("div",Ke,[a("div",Ee,[a("div",Ne,[l(M,{type:"text",modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=t=>T.value=t),placeholder:"Cari deskripsi, siswa...",class:"w-full md:col-span-1"},null,8,["modelValue"]),c(a("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>I.value=t),class:"w-full md:col-span-1 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm"},[e[30]||(e[30]=a("option",{value:""},"Semua Kelas",-1)),(r(!0),i(_,null,y(H.value,t=>(r(),i("option",{key:t.id_kelas,value:t.id_kelas},u(t.nama_kelas),9,He))),128))],512),[[b,I.value]]),c(a("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>F.value=t),class:"w-full md:col-span-1 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm"},[e[31]||(e[31]=a("option",{value:""},"Semua Status",-1)),(r(!0),i(_,null,y(de.value,t=>(r(),i("option",{key:t,value:t},u(t),9,Ye))),128))],512),[[b,F.value]]),a("div",Je,[(w=Y.value)!=null&&w.create_invoice?(r(),oe(Te,{key:0,align:"right",width:"56"},{trigger:m(()=>[l(q,{class:"w-full md:w-auto inline-flex items-center justify-center"},{default:m(()=>[l(s(Fe),{class:"-ml-0.5 mr-1.5 h-5 w-5"}),e[32]||(e[32]=v(" Buat Tagihan ")),l(s(ze),{class:"ml-2 -mr-0.5 h-4 w-4"})]),_:1,__:[32]})]),content:m(()=>[a("button",{onClick:pe,class:"block w-full px-4 py-2 text-start text-sm ..."},"Tagihan Individual (SPP)"),a("button",{onClick:ce,class:"block w-full px-4 py-2 text-start text-sm ..."},"Tagihan Massal (Per Kelas)"),a("button",{onClick:_e,class:"block w-full px-4 py-2 text-start text-sm ..."},"Tagihan Massal (Semua Siswa)")]),_:1})):k("",!0)])])]),a("div",Re,[a("div",We,[a("table",Ge,[e[35]||(e[35]=a("thead",{class:"bg-gray-50 dark:bg-gray-700"},[a("tr",null,[a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Siswa"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deskripsi"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jatuh Tempo"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Dibuat"),a("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),a("tbody",Oe,[!B.value.data||B.value.data.length===0?(r(),i("tr",Xe,e[33]||(e[33]=[a("td",{colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500"},"Tidak ada data invoice.",-1)]))):(r(!0),i(_,{key:1},y(B.value.data,t=>{var E,re;return r(),i("tr",{key:t.id},[a("td",Qe,[v(u(t.siswa_nama)+" ",1),e[34]||(e[34]=a("br",null,null,-1)),a("span",Ze,u(t.kelas_nama),1)]),a("td",ea,[a("div",aa,u(le(t.description).main),1),a("div",ta,u(le(t.description).detail),1)]),a("td",sa,u(t.total_amount_formatted),1),a("td",la,u(t.due_date_formatted),1),a("td",ra,[a("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",we(t.status)])},u(t.status),3)]),a("td",ia,u(t.created_at_formatted),1),a("td",oa,[a("div",na,[t.xendit_payment_url?(r(),i("a",{key:0,href:t.xendit_payment_url,target:"_blank",class:"text-blue-600 hover:text-blue-900 p-1",title:"Lihat Invoice Xendit"},[l(s(Ue),{class:"h-5 w-5"})],8,da)):k("",!0),t.status==="PENDING"&&((E=Y.value)!=null&&E.create_invoice)?(r(),i("button",{key:1,onClick:je=>he(t),class:"text-gray-400 hover:text-red-600 p-1",title:"Batalkan Invoice"},[l(s(qe),{class:"h-5 w-5"})],8,ua)):k("",!0),t.status==="EXPIRED"&&((re=Y.value)!=null&&re.create_invoice)?(r(),i("button",{key:2,onClick:je=>xe(t),class:"text-gray-400 hover:text-green-600 p-1",title:"Buat Ulang Invoice"},[l(s($e),{class:"h-5 w-5"})],8,ma)):k("",!0)])])])}),128))])])]),B.value.links&&B.value.links.length>3?(r(),i("div",ga,[a("div",pa,[(r(!0),i(_,null,y(B.value.links,(t,E)=>(r(),i(_,{key:E},[t.url===null?(r(),i("div",{key:0,class:"mr-1 mb-1 px-3 py-2 text-sm select-none",innerHTML:t.label},null,8,ca)):(r(),oe(s(Ve),{key:1,class:V(["mr-1 mb-1 px-3 py-2 text-sm leading-4 border rounded dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:border-indigo-500 dark:focus:border-indigo-700 focus:text-indigo-500 dark:focus:text-indigo-300",{"bg-indigo-500 text-white dark:bg-indigo-600 dark:text-white dark:border-indigo-700":t.active}]),href:t.url,innerHTML:t.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):k("",!0)])])]),l($,{show:D.value,closeable:!s(C).processing,onClose:e[4]||(e[4]=t=>D.value=!1),maxWidth:"md"},{default:m(()=>[a("div",_a,[s(C).processing?(r(),i("div",fa,e[36]||(e[36]=[a("svg",{class:"animate-spin h-8 w-8 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("span",{class:"ml-3 text-gray-700 dark:text-gray-300"},"Memproses...",-1)]))):k("",!0),e[38]||(e[38]=a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Konfirmasi Pembatalan Invoice",-1)),e[39]||(e[39]=a("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Apakah Anda yakin ingin membatalkan invoice ini? Status akan berubah menjadi EXPIRED dan link pembayaran tidak akan berlaku lagi. ",-1)),a("div",ya,[l(z,{onClick:e[3]||(e[3]=t=>D.value=!1),disabled:s(C).processing},{default:m(()=>e[37]||(e[37]=[v("Tidak")])),_:1,__:[37]},8,["disabled"]),l(De,{onClick:be,class:V({"opacity-25":s(C).processing}),disabled:s(C).processing},{default:m(()=>[v(u(s(C).processing?"Memproses...":"Ya, Batalkan Invoice"),1)]),_:1},8,["class","disabled"])])])]),_:1},8,["show","closeable"]),l($,{show:A.value,closeable:!s(S).processing,onClose:e[6]||(e[6]=t=>A.value=!1),maxWidth:"md"},{default:m(()=>[a("div",ka,[s(S).processing?(r(),i("div",ha,e[40]||(e[40]=[a("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("span",{class:"ml-3 text-gray-700 dark:text-gray-300"},"Memproses...",-1)]))):k("",!0),e[42]||(e[42]=a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Konfirmasi Buat Ulang Invoice",-1)),e[43]||(e[43]=a("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Anda akan membuat invoice baru berdasarkan tagihan yang sudah kedaluwarsa ini. Invoice lama akan tetap ada sebagai riwayat. Lanjutkan? ",-1)),a("div",ba,[l(z,{onClick:e[5]||(e[5]=t=>A.value=!1),disabled:s(S).processing},{default:m(()=>e[41]||(e[41]=[v("Tidak")])),_:1,__:[41]},8,["disabled"]),l(q,{onClick:ve,class:V({"opacity-25":s(S).processing}),disabled:s(S).processing},{default:m(()=>[v(u(s(S).processing?"Memproses...":"Ya, Buat Ulang"),1)]),_:1},8,["class","disabled"])])])]),_:1},8,["show","closeable"]),l($,{show:J.value,onClose:X,maxWidth:"2xl"},{default:m(()=>[s(n).processing?(r(),i("div",xa,e[44]||(e[44]=[a("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("span",{class:"ml-3 text-gray-700 dark:text-gray-300"},"Memproses...",-1)]))):k("",!0),a("div",va,[e[48]||(e[48]=a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6 border-b pb-3 dark:border-gray-700"}," Buat Tagihan SPP Individual ",-1)),a("form",{onSubmit:ee(fe,["prevent"]),class:"space-y-6"},[a("div",null,[l(f,{for:"tagihan_id_siswa",value:"Pilih Siswa",required:!0}),c(a("select",{id:"tagihan_id_siswa","onUpdate:modelValue":e[7]||(e[7]=t=>s(n).id_siswa=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[e[45]||(e[45]=a("option",{value:"",disabled:""},"-- Pilih Siswa --",-1)),(r(!0),i(_,null,y(te.value,t=>(r(),i("option",{key:t.id_siswa,value:t.id_siswa},u(t.nama_siswa)+" (Email: "+u(t.user?t.user.email:"N/A")+") ",9,wa))),128))],512),[[b,s(n).id_siswa]]),l(p,{class:"mt-2",message:s(n).errors.id_siswa},null,8,["message"])]),a("div",ja,[a("div",null,[l(f,{for:"tagihan_periode_bulan_ind",value:"Bulan Periode",required:!0}),c(a("select",{id:"tagihan_periode_bulan_ind","onUpdate:modelValue":e[8]||(e[8]=t=>s(n).periode_tagihan_bulan=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[(r(!0),i(_,null,y(s(O),t=>(r(),i("option",{key:t.value,value:t.value},u(t.name),9,Ma))),128))],512),[[b,s(n).periode_tagihan_bulan]]),l(p,{class:"mt-2",message:s(n).errors.periode_tagihan_bulan},null,8,["message"])]),a("div",null,[l(f,{for:"tagihan_periode_tahun_ind",value:"Tahun Periode",required:!0}),c(a("select",{id:"tagihan_periode_tahun_ind","onUpdate:modelValue":e[9]||(e[9]=t=>s(n).periode_tagihan_tahun=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[(r(!0),i(_,null,y(s(G),t=>(r(),i("option",{key:t,value:t},u(t),9,Ca))),128))],512),[[b,s(n).periode_tagihan_tahun]]),l(p,{class:"mt-2",message:s(n).errors.periode_tagihan_tahun},null,8,["message"])])]),a("div",null,[l(f,{for:"tagihan_jumlah_spp_ind",value:"Jumlah SPP Ditagih",required:!0}),l(M,{id:"tagihan_jumlah_spp_ind",type:"number",step:"1000",class:"mt-1 block w-full",modelValue:s(n).jumlah_spp_ditagih,"onUpdate:modelValue":e[10]||(e[10]=t=>s(n).jumlah_spp_ditagih=t),modelModifiers:{number:!0},required:"",placeholder:"Otomatis terisi saat siswa dipilih"},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(n).errors.jumlah_spp_ditagih},null,8,["message"])]),a("div",null,[l(f,{for:"tagihan_admin_fee_ind",value:"Admin Fee (Opsional)"}),l(M,{id:"tagihan_admin_fee_ind",type:"number",step:"1000",class:"mt-1 block w-full",modelValue:s(n).admin_fee_ditagih,"onUpdate:modelValue":e[11]||(e[11]=t=>s(n).admin_fee_ditagih=t),modelModifiers:{number:!0},placeholder:"0"},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(n).errors.admin_fee_ditagih},null,8,["message"])]),a("div",null,[l(f,{for:"tagihan_jatuh_tempo_ind",value:"Tanggal Jatuh Tempo",required:!0}),l(M,{id:"tagihan_jatuh_tempo_ind",type:"date",class:"mt-1 block w-full",modelValue:s(n).tanggal_jatuh_tempo,"onUpdate:modelValue":e[12]||(e[12]=t=>s(n).tanggal_jatuh_tempo=t),required:""},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(n).errors.tanggal_jatuh_tempo},null,8,["message"])]),a("div",null,[a("label",Sa,[l(ae,{checked:s(n).send_whatsapp_notif,"onUpdate:checked":e[13]||(e[13]=t=>s(n).send_whatsapp_notif=t),name:"send_whatsapp_notif"},null,8,["checked"]),e[46]||(e[46]=a("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},"Kirim Notifikasi Invoice via WhatsApp",-1))]),l(p,{class:"mt-2",message:s(n).errors.send_whatsapp_notif},null,8,["message"])]),a("div",Va,[l(z,{onClick:X,type:"button",disabled:s(n).processing},{default:m(()=>e[47]||(e[47]=[v(" Batal ")])),_:1,__:[47]},8,["disabled"]),l(q,{class:V({"opacity-25":s(n).processing}),disabled:s(n).processing},{default:m(()=>[s(n).processing?(r(),i("span",Pa,"Memproses...")):(r(),i("span",Ba,"Buat Tagihan"))]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"]),l($,{show:R.value,onClose:Q,maxWidth:"2xl"},{default:m(()=>[s(o).processing?(r(),i("div",Da,e[49]||(e[49]=[a("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("span",{class:"ml-3 text-gray-700 dark:text-gray-300"},"Sedang mengenerate tagihan, mohon tunggu...",-1)]))):k("",!0),a("div",Aa,[e[59]||(e[59]=a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6 border-b pb-3 dark:border-gray-700"}," Buat Tagihan SPP Massal (Per Kelas) ",-1)),a("form",{onSubmit:ee(ye,["prevent"]),class:"space-y-6"},[a("div",null,[l(f,{for:"bulk_id_kelas",value:"Pilih Kelas",required:!0}),c(a("select",{id:"bulk_id_kelas","onUpdate:modelValue":e[14]||(e[14]=t=>s(o).id_kelas=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[e[50]||(e[50]=a("option",{value:"",disabled:""},"-- Pilih Kelas --",-1)),(r(!0),i(_,null,y(H.value,t=>(r(),i("option",{key:t.id_kelas,value:t.id_kelas},u(t.nama_kelas),9,Ta))),128))],512),[[b,s(o).id_kelas]]),l(p,{class:"mt-2",message:s(o).errors.id_kelas},null,8,["message"])]),a("div",Ia,[a("div",null,[l(f,{for:"bulk_periode_bulan",value:"Bulan Periode",required:!0}),c(a("select",{id:"bulk_periode_bulan","onUpdate:modelValue":e[15]||(e[15]=t=>s(o).periode_tagihan_bulan=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[(r(!0),i(_,null,y(s(O),t=>(r(),i("option",{key:t.value,value:t.value},u(t.name),9,Fa))),128))],512),[[b,s(o).periode_tagihan_bulan]]),l(p,{class:"mt-2",message:s(o).errors.periode_tagihan_bulan},null,8,["message"])]),a("div",null,[l(f,{for:"bulk_periode_tahun",value:"Tahun Periode",required:!0}),c(a("select",{id:"bulk_periode_tahun","onUpdate:modelValue":e[16]||(e[16]=t=>s(o).periode_tagihan_tahun=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[(r(!0),i(_,null,y(s(G),t=>(r(),i("option",{key:t,value:t},u(t),9,Ua))),128))],512),[[b,s(o).periode_tagihan_tahun]]),l(p,{class:"mt-2",message:s(o).errors.periode_tagihan_tahun},null,8,["message"])])]),a("div",null,[l(f,{for:"bulk_jatuh_tempo",value:"Tanggal Jatuh Tempo",required:!0}),l(M,{id:"bulk_jatuh_tempo",type:"date",class:"mt-1 block w-full",modelValue:s(o).tanggal_jatuh_tempo,"onUpdate:modelValue":e[17]||(e[17]=t=>s(o).tanggal_jatuh_tempo=t),required:""},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(o).errors.tanggal_jatuh_tempo},null,8,["message"])]),a("fieldset",null,[e[53]||(e[53]=a("legend",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Jumlah SPP",-1)),a("div",qa,[a("label",$a,[c(a("input",{type:"radio","onUpdate:modelValue":e[18]||(e[18]=t=>s(o).jenis_jumlah_spp=t),value:"default",class:"form-radio h-4 w-4 text-indigo-600 border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:ring-indigo-600 focus:ring-indigo-500"},null,512),[[N,s(o).jenis_jumlah_spp]]),e[51]||(e[51]=a("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Gunakan SPP Default Siswa/Kelas",-1))]),a("label",za,[c(a("input",{type:"radio","onUpdate:modelValue":e[19]||(e[19]=t=>s(o).jenis_jumlah_spp=t),value:"manual",class:"form-radio h-4 w-4 text-indigo-600 border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:ring-indigo-600 focus:ring-indigo-500"},null,512),[[N,s(o).jenis_jumlah_spp]]),e[52]||(e[52]=a("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Input Jumlah Manual (untuk semua siswa)",-1))])]),s(o).jenis_jumlah_spp==="manual"?(r(),i("div",La,[l(M,{type:"number",step:"1000",class:"mt-1 block w-full",modelValue:s(o).jumlah_spp_manual,"onUpdate:modelValue":e[20]||(e[20]=t=>s(o).jumlah_spp_manual=t),modelModifiers:{number:!0},placeholder:"Jumlah SPP Manual"},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(o).errors.jumlah_spp_manual},null,8,["message"])])):k("",!0)]),a("fieldset",null,[e[56]||(e[56]=a("legend",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Admin Fee",-1)),a("div",Ka,[a("label",Ea,[c(a("input",{type:"radio","onUpdate:modelValue":e[21]||(e[21]=t=>s(o).jenis_admin_fee=t),value:"default",class:"form-radio h-4 w-4 text-indigo-600 border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:ring-indigo-600 focus:ring-indigo-500"},null,512),[[N,s(o).jenis_admin_fee]]),e[54]||(e[54]=a("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Gunakan Admin Fee Default Siswa",-1))]),a("label",Na,[c(a("input",{type:"radio","onUpdate:modelValue":e[22]||(e[22]=t=>s(o).jenis_admin_fee=t),value:"manual",class:"form-radio h-4 w-4 text-indigo-600 border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:ring-indigo-600 focus:ring-indigo-500"},null,512),[[N,s(o).jenis_admin_fee]]),e[55]||(e[55]=a("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Input Admin Fee Manual (untuk semua siswa)",-1))])]),s(o).jenis_admin_fee==="manual"?(r(),i("div",Ha,[l(M,{type:"number",step:"1000",class:"mt-1 block w-full",modelValue:s(o).admin_fee_manual,"onUpdate:modelValue":e[23]||(e[23]=t=>s(o).admin_fee_manual=t),modelModifiers:{number:!0},placeholder:"Admin Fee Manual"},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(o).errors.admin_fee_manual},null,8,["message"])])):k("",!0)]),a("div",Ya,[a("label",Ja,[l(ae,{checked:s(o).send_whatsapp_notif,"onUpdate:checked":e[24]||(e[24]=t=>s(o).send_whatsapp_notif=t)},null,8,["checked"]),e[57]||(e[57]=a("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},"Kirim Notifikasi Invoice via WhatsApp",-1))]),l(p,{class:"mt-2",message:s(o).errors.send_whatsapp_notif},null,8,["message"])]),a("div",Ra,[l(z,{onClick:Q,type:"button",disabled:s(o).processing},{default:m(()=>e[58]||(e[58]=[v(" Batal ")])),_:1,__:[58]},8,["disabled"]),l(q,{class:V({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:m(()=>[s(o).processing?(r(),i("span",Ga,"Memproses...")):(r(),i("span",Wa,"Generate Tagihan"))]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"]),l($,{show:W.value,onClose:Z,maxWidth:"2xl"},{default:m(()=>[s(g).processing?(r(),i("div",Oa,e[60]||(e[60]=[a("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("span",{class:"ml-3 text-gray-700 dark:text-gray-300"},"Memulai proses di latar belakang...",-1)]))):k("",!0),a("div",Xa,[e[63]||(e[63]=a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6 border-b pb-3 dark:border-gray-700"}," Generate Tagihan untuk Semua Siswa Aktif ",-1)),e[64]||(e[64]=a("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Proses ini akan berjalan di latar belakang (queue). Tagihan hanya akan dibuat untuk siswa aktif yang belum memiliki tagihan pada periode yang dipilih. Jumlah SPP dan Admin Fee akan diambil dari pengaturan default masing-masing siswa/kelas. ",-1)),a("form",{onSubmit:ee(ke,["prevent"]),class:"space-y-6 mt-6"},[a("div",Qa,[a("div",null,[l(f,{for:"bulk_all_periode_bulan",value:"Bulan Periode",required:!0}),c(a("select",{id:"bulk_all_periode_bulan","onUpdate:modelValue":e[25]||(e[25]=t=>s(g).periode_tagihan_bulan=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[(r(!0),i(_,null,y(s(O),t=>(r(),i("option",{key:t.value,value:t.value},u(t.name),9,Za))),128))],512),[[b,s(g).periode_tagihan_bulan]]),l(p,{class:"mt-2",message:s(g).errors.periode_tagihan_bulan},null,8,["message"])]),a("div",null,[l(f,{for:"bulk_all_periode_tahun",value:"Tahun Periode",required:!0}),c(a("select",{id:"bulk_all_periode_tahun","onUpdate:modelValue":e[26]||(e[26]=t=>s(g).periode_tagihan_tahun=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 rounded-md shadow-sm",required:""},[(r(!0),i(_,null,y(s(G),t=>(r(),i("option",{key:t,value:t},u(t),9,et))),128))],512),[[b,s(g).periode_tagihan_tahun]]),l(p,{class:"mt-2",message:s(g).errors.periode_tagihan_tahun},null,8,["message"])])]),a("div",null,[l(f,{for:"bulk_all_jatuh_tempo",value:"Tanggal Jatuh Tempo",required:!0}),l(M,{id:"bulk_all_jatuh_tempo",type:"date",class:"mt-1 block w-full",modelValue:s(g).tanggal_jatuh_tempo,"onUpdate:modelValue":e[27]||(e[27]=t=>s(g).tanggal_jatuh_tempo=t),required:""},null,8,["modelValue"]),l(p,{class:"mt-2",message:s(g).errors.tanggal_jatuh_tempo},null,8,["message"])]),a("div",at,[a("label",tt,[l(ae,{checked:s(g).send_whatsapp_notif,"onUpdate:checked":e[28]||(e[28]=t=>s(g).send_whatsapp_notif=t),name:"send_whatsapp_notif"},null,8,["checked"]),e[61]||(e[61]=a("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},"Kirim Notifikasi Invoice via WhatsApp",-1))])]),a("div",st,[l(z,{onClick:Z,type:"button",disabled:s(g).processing},{default:m(()=>e[62]||(e[62]=[v(" Batal ")])),_:1,__:[62]},8,["disabled"]),l(q,{class:V({"opacity-25":s(g).processing}),disabled:s(g).processing},{default:m(()=>[s(g).processing?(r(),i("span",rt,"Memulai...")):(r(),i("span",lt,"Mulai Proses"))]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"])]}),_:1})],64))}};export{At as default};
