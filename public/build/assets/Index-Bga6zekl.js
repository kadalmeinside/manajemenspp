import{G as J,k as i,r as x,x as X,y as Y,o as Z,c as m,b as n,d as r,u as o,g as aa,w as d,e as t,h as ea,l as V,j as u,F as E,f as ta,t as c,m as sa,C as ra,I as la,n as T,Q as U}from"./app-lo7b8J9h.js";import{A as oa}from"./AuthenticatedLayout-DfkN8Ykd.js";import{P as j}from"./PrimaryButton-Ct87OL4D.js";import{_ as A,a as O}from"./SecondaryButton-Ce7HpwLn.js";import{D as da}from"./DangerButton-lOCLdq4K.js";import{a as v,_ as h,b as w}from"./TextInput-G837rKFq.js";import{_ as ia}from"./Toast-D_FhrU92.js";import{_ as na}from"./Pagination-Bc_K82Jh.js";import{l as ua}from"./lodash-BrJg9HFb.js";import{r as pa}from"./PlusIcon-DlDK5xU9.js";import{r as ma}from"./PencilIcon-0syDA4G3.js";import{r as ca}from"./TrashIcon-Bk9HSHQ4.js";import"./ApplicationLogo-CVLqXZiY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CJMmfBol.js";import"./ArrowPathIcon-BfftkvQP.js";import"./CheckCircleIcon-CiDQtB2A.js";import"./XCircleIcon-DVnp3z6s.js";import"./UsersIcon-BfG32PSN.js";import"./XMarkIcon-CyhsEiSP.js";import"./ChevronDownIcon-DGbIcL3m.js";import"./ChevronRightIcon-Ck2YXiSd.js";import"./InformationCircleIcon-Clr6GlgG.js";import"./ExclamationTriangleIcon-DVAgUDly.js";import"./CheckCircleIcon-BJ8CvQET.js";const ya={class:"pb-12 pt-4"},fa={class:"max-w-full mx-auto"},_a={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ka={class:"p-6 pb-0 text-gray-900 dark:text-gray-100"},ga={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},xa={class:"overflow-x-auto"},ba={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},va={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ha={key:0},wa={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Ca={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Ka={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Da={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Va=["onClick"],Sa=["onClick"],Ba={class:"p-6"},Ma={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 border-b pb-3 dark:border-gray-700"},$a={class:"mt-6 flex justify-end space-x-3 pt-4 border-t dark:border-gray-700"},Fa={class:"p-6"},Na={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},Pa={class:"font-semibold"},Ea={class:"mt-6 flex justify-end space-x-3"},ie={__name:"Index",setup(Ta){const y=J(),f=i(()=>y.props.kelas),S=i(()=>y.props.filters||{}),C=i(()=>y.props.can||{}),H=i(()=>{var a;return(a=y.props.flash)==null?void 0:a.message}),L=i(()=>{var a;return((a=y.props.flash)==null?void 0:a.type)||"info"}),b=x(!1),p=x(!1),s=X({id_kelas:null,nama_kelas:"",deskripsi:"",biaya_spp_default:null,biaya_pendaftaran:null}),B=a=>{[46,8,9,27,13].indexOf(a.keyCode)!==-1||a.keyCode===65&&(a.ctrlKey===!0||a.metaKey===!0)||a.keyCode===67&&(a.ctrlKey===!0||a.metaKey===!0)||a.keyCode===86&&(a.ctrlKey===!0||a.metaKey===!0)||a.keyCode===88&&(a.ctrlKey===!0||a.metaKey===!0)||a.keyCode>=35&&a.keyCode<=40||(a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)&&a.preventDefault()},M=i({get(){return s.biaya_spp_default===null||s.biaya_spp_default===void 0?"":new Intl.NumberFormat("id-ID").format(s.biaya_spp_default)},set(a){const e=a.replace(/[^0-9]/g,"");s.biaya_spp_default=e?parseInt(e,10):null}}),$=i({get(){return s.biaya_pendaftaran===null||s.biaya_pendaftaran===void 0?"":new Intl.NumberFormat("id-ID").format(s.biaya_pendaftaran)},set(a){const e=a.replace(/[^0-9]/g,"");s.biaya_pendaftaran=e?parseInt(e,10):null}}),_=x(S.value.search||""),Q=()=>{U.get(route("admin.kelas.index"),{search:_.value,page:1},{preserveState:!0,preserveScroll:!0,replace:!0,only:["kelas","filters"]})};Y(_,ua.debounce(Q,300));const R=()=>{p.value=!1,s.reset(),s.clearErrors(),b.value=!0},q=a=>{p.value=!0,s.reset(),s.clearErrors(),s.id_kelas=a.id_kelas,s.nama_kelas=a.nama_kelas,s.deskripsi=a.deskripsi,s.biaya_spp_default=a.biaya_spp_default,s.biaya_pendaftaran=a.biaya_pendaftaran,b.value=!0},K=()=>{b.value=!1,s.reset(),s.clearErrors()},I=()=>{const a=p.value?route("admin.kelas.update",s.id_kelas):route("admin.kelas.store"),e=p.value?"put":"post";s.submit(e,a,{preserveScroll:!0,onSuccess:()=>K()})},k=x(!1),g=x(null),W=a=>{g.value=a,k.value=!0},z=()=>{g.value&&U.delete(route("admin.kelas.destroy",g.value.id_kelas),{preserveScroll:!0,onSuccess:()=>{k.value=!1,g.value=null}})};Z(()=>{const a=new URLSearchParams(window.location.search);_.value=a.get("search")||S.value.search||""});const F=a=>a==null||isNaN(parseFloat(a))?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return(a,e)=>(n(),m(E,null,[r(o(aa),{title:"Manajemen Kelas"}),r(oa,null,{header:d(()=>e[7]||(e[7]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Kelas",-1)])),default:d(()=>{var N;return[r(ia,{message:H.value,type:L.value},null,8,["message","type"]),t("div",ya,[t("div",fa,[t("div",_a,[t("div",ka,[t("div",ga,[r(v,{type:"text",modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=l=>_.value=l),placeholder:"Cari nama atau deskripsi kelas...",class:"w-full md:max-w-sm","aria-label":"Cari kelas"},null,8,["modelValue"]),(N=C.value)!=null&&N.create_kelas?(n(),ea(j,{key:0,onClick:R,class:"w-full md:w-auto"},{default:d(()=>[r(o(pa),{class:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),e[8]||(e[8]=u(" Tambah Kelas Baru "))]),_:1,__:[8]})):V("",!0)])]),t("div",xa,[t("table",ba,[e[10]||(e[10]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Nama Kelas"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Biaya Pendaftaran"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Biaya SPP Default"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",va,[!f.value||!f.value.data||f.value.data.length===0?(n(),m("tr",ha,e[9]||(e[9]=[t("td",{colspan:"4",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"},"Tidak ada data kelas.",-1)]))):(n(!0),m(E,{key:1},ta(f.value.data,l=>{var D,P;return n(),m("tr",{key:l.id_kelas},[t("td",wa,c(l.nama_kelas),1),t("td",Ca,c(F(l.biaya_pendaftaran)),1),t("td",Ka,c(F(l.biaya_spp_default)),1),t("td",Da,[(D=C.value)!=null&&D.edit_kelas?(n(),m("button",{key:0,onClick:G=>q(l),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 p-1 mr-2",title:"Edit Kelas"},[r(o(ma),{class:"h-5 w-5"})],8,Va)):V("",!0),(P=C.value)!=null&&P.delete_kelas?(n(),m("button",{key:1,onClick:G=>W(l),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200 p-1",title:"Hapus Kelas"},[r(o(ca),{class:"h-5 w-5"})],8,Sa)):V("",!0)])])}),128))])])]),r(na,{links:f.value.links,class:"p-6 border-t border-gray-200 dark:border-gray-700"},null,8,["links"])])])]),r(A,{show:b.value,onClose:K,maxWidth:"xl"},{default:d(()=>[t("div",Ba,[t("h2",Ma,c(p.value?"Edit Kelas":"Tambah Kelas Baru"),1),t("form",{onSubmit:sa(I,["prevent"]),class:"space-y-6"},[t("div",null,[r(h,{for:"kelas_nama_kelas_modal",value:"Nama Kelas",required:""}),r(v,{id:"kelas_nama_kelas_modal",type:"text",class:"mt-1 block w-full",modelValue:o(s).nama_kelas,"onUpdate:modelValue":e[1]||(e[1]=l=>o(s).nama_kelas=l),required:"",autofocus:""},null,8,["modelValue"]),r(w,{class:"mt-2",message:o(s).errors.nama_kelas},null,8,["message"])]),t("div",null,[r(h,{for:"kelas_deskripsi_modal",value:"Deskripsi (Opsional)"}),ra(t("textarea",{id:"kelas_deskripsi_modal","onUpdate:modelValue":e[2]||(e[2]=l=>o(s).deskripsi=l),rows:"3",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[la,o(s).deskripsi]]),r(w,{class:"mt-2",message:o(s).errors.deskripsi},null,8,["message"])]),t("div",null,[r(h,{for:"kelas_biaya_pendaftaran_modal",value:"Biaya Pendaftaran (Opsional)"}),r(v,{id:"kelas_biaya_pendaftaran_modal",type:"text",inputmode:"numeric",class:"mt-1 block w-full",modelValue:$.value,"onUpdate:modelValue":e[3]||(e[3]=l=>$.value=l),onKeydown:B,placeholder:"Contoh: 1500000"},null,8,["modelValue"]),r(w,{class:"mt-2",message:o(s).errors.biaya_pendaftaran},null,8,["message"])]),t("div",null,[r(h,{for:"kelas_biaya_spp_modal",value:"Biaya SPP Default (Opsional)"}),r(v,{id:"kelas_biaya_spp_modal",type:"text",inputmode:"numeric",class:"mt-1 block w-full",modelValue:M.value,"onUpdate:modelValue":e[4]||(e[4]=l=>M.value=l),onKeydown:B,placeholder:"Contoh: 300000"},null,8,["modelValue"]),r(w,{class:"mt-2",message:o(s).errors.biaya_spp_default},null,8,["message"])]),t("div",$a,[r(O,{onClick:K,type:"button"},{default:d(()=>e[11]||(e[11]=[u(" Batal ")])),_:1,__:[11]}),r(j,{class:T({"opacity-25":o(s).processing}),disabled:o(s).processing},{default:d(()=>[u(c(p.value?"Update Kelas":"Simpan Kelas"),1)]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"]),r(A,{show:k.value,onClose:e[6]||(e[6]=l=>k.value=!1),maxWidth:"md"},{default:d(()=>{var l;return[t("div",Fa,[e[16]||(e[16]=t("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Konfirmasi Hapus Kelas ",-1)),t("p",Na,[e[12]||(e[12]=u(' Apakah Anda yakin ingin menghapus kelas "')),t("span",Pa,c((l=g.value)==null?void 0:l.nama_kelas),1),e[13]||(e[13]=u('"? Aksi ini tidak dapat dibatalkan. '))]),t("div",Ea,[r(O,{onClick:e[5]||(e[5]=D=>k.value=!1),type:"button"},{default:d(()=>e[14]||(e[14]=[u(" Batal ")])),_:1,__:[14]}),r(da,{onClick:z,class:T({"opacity-25":o(s).processing}),disabled:o(s).processing},{default:d(()=>e[15]||(e[15]=[u(" Hapus Kelas ")])),_:1,__:[15]},8,["class","disabled"])])])]}),_:1},8,["show"])]}),_:1})],64))}};export{ie as default};
