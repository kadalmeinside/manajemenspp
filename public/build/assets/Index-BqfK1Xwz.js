import{D as G,c as v,j as b,x as J,q as X,m as Y,a as n,o as d,b as l,u as o,g as Z,w as u,d as a,e as K,f as N,i as p,F as C,r as P,t as k,S as ee,n as S,h as ae,B as se,H as te,Q as x}from"./app-DTOZ3zsH.js";import{A as re}from"./AuthenticatedLayout-CZg4ZEOp.js";import{P as F}from"./PrimaryButton-CTuY8E2Y.js";import{_ as H,a as j}from"./Modal-Csx7A8p6.js";import{D as le}from"./DangerButton-NhoTXmWP.js";import{a as V,_ as B,b as $}from"./TextInput-PqLkJz5Q.js";import{_ as oe}from"./Toast-sEvPeIUI.js";import{l as de}from"./lodash-CX8nwrGi.js";import{r as ie}from"./PlusIcon-Czn359QC.js";import{r as ne}from"./PencilIcon-DPUONLZ6.js";import{r as ue}from"./TrashIcon-lNUNpr8a.js";import"./ApplicationLogo-Cp59Ii8x.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserCircleIcon-Da93_6Nd.js";import"./ArrowPathIcon-BmVieaQ0.js";import"./CheckCircleIcon-mXPivvxl.js";import"./XCircleIcon-C0R5r3qY.js";const me={class:"pb-12 pt-4"},pe={class:"max-w-7xl mx-auto"},ce={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ge={class:"p-6 pb-0 text-gray-900 dark:text-gray-100"},fe={class:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4"},ke={class:"flex flex-col sm:flex-row items-center gap-3 flex-grow"},xe={class:"px-6 overflow-x-auto"},ye={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},_e={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ve={key:0},be={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},he={class:"px-6 py-4 whitespace-normal text-sm text-gray-500 dark:text-gray-300 break-words max-w-md"},we={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Ke={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ce=["onClick"],De=["onClick"],Me={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},Se={class:"flex flex-wrap -mb-1 justify-center"},Ve=["innerHTML"],Be={class:"p-6"},$e={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 border-b pb-3 dark:border-gray-700"},Ee={class:"mt-6 flex justify-end space-x-3 pt-4 border-t dark:border-gray-700"},Te={class:"p-6"},Ne={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},Pe={class:"font-semibold"},Fe={class:"mt-6 flex justify-end space-x-3"},aa={__name:"Index",setup(He){const y=G(),i=v(()=>y.props.kelas),E=v(()=>y.props.filters||{}),D=v(()=>y.props.can||{}),L=v(()=>{var s;return(s=y.props.flash)==null?void 0:s.message}),A=v(()=>{var s;return((s=y.props.flash)==null?void 0:s.type)||"info"}),h=b(!1),c=b(!1),t=J({id_kelas:null,nama_kelas:"",deskripsi:"",biaya_spp_default:null}),g=b(E.value.search||""),U=()=>{x.get(route("admin.kelas.index"),{search:g.value,page:1},{preserveState:!0,preserveScroll:!0,replace:!0,only:["kelas","filters"]})};X(g,de.debounce(U,300));const Q=()=>{c.value=!1,t.reset(),t.clearErrors(),h.value=!0},R=s=>{c.value=!0,t.reset(),t.clearErrors(),t.id_kelas=s.id_kelas,t.nama_kelas=s.nama_kelas,t.deskripsi=s.deskripsi,t.biaya_spp_default=s.biaya_spp_default,h.value=!0},M=()=>{h.value=!1,t.reset(),t.clearErrors()},q=()=>{const s=c.value?route("admin.kelas.update",t.id_kelas):route("admin.kelas.store"),e=c.value?"put":"post";t.submit(e,s,{preserveScroll:!0,onSuccess:()=>{M()},onError:w=>{console.error("Kelas form submission error:",w)}})},f=b(!1),m=b(null),O=s=>{m.value=s,f.value=!0},W=()=>{m.value&&x.delete(route("admin.kelas.destroy",m.value.id_kelas),{preserveScroll:!0,onSuccess:()=>{const s=i.value.data,e=i.value.current_page;s.length===1&&e>1&&m.value.id_kelas===s[0].id_kelas?x.get(route("admin.kelas.index"),{search:g.value,page:e-1},{preserveState:!1,preserveScroll:!0,replace:!0,only:["kelas","flash","filters"]}):x.reload({preserveScroll:!0,only:["kelas","flash"]}),m.value=null,f.value=!1},onError:s=>{console.error("Delete kelas error:",s),m.value=null,f.value=!1}})};Y(()=>{const s=new URLSearchParams(window.location.search);g.value=s.get("search")||E.value.search||""});const z=s=>s==null||isNaN(parseFloat(s))?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);return(s,e)=>(d(),n(C,null,[l(o(Z),{title:"Manajemen Kelas"}),l(re,null,{header:u(()=>e[6]||(e[6]=[a("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manajemen Kelas",-1)])),default:u(()=>{var w;return[l(oe,{message:L.value,type:A.value},null,8,["message","type"]),a("div",me,[a("div",pe,[a("div",ce,[a("div",ge,[a("div",fe,[a("div",ke,[l(V,{type:"text",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=r=>g.value=r),placeholder:"Cari nama atau deskripsi kelas...",class:"w-full md:max-w-sm","aria-label":"Cari kelas"},null,8,["modelValue"])]),(w=D.value)!=null&&w.create_kelas?(d(),N(F,{key:0,onClick:Q,class:"w-full md:w-auto"},{default:u(()=>[l(o(ie),{class:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),e[7]||(e[7]=p(" Tambah Kelas Baru "))]),_:1,__:[7]})):K("",!0)])]),a("div",xe,[a("table",ye,[e[9]||(e[9]=a("thead",{class:"bg-gray-50 dark:bg-gray-700"},[a("tr",null,[a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Nama Kelas"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Deskripsi"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Biaya SPP Default"),a("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Aksi")])],-1)),a("tbody",_e,[!i.value||!i.value.data||i.value.data.length===0?(d(),n("tr",ve,e[8]||(e[8]=[a("td",{colspan:"4",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"},"Tidak ada data kelas.",-1)]))):(d(!0),n(C,{key:1},P(i.value.data,r=>{var _,T;return d(),n("tr",{key:r.id_kelas},[a("td",be,k(r.nama_kelas),1),a("td",he,k(r.deskripsi||"-"),1),a("td",we,k(z(r.biaya_spp_default)),1),a("td",Ke,[(_=D.value)!=null&&_.edit_kelas?(d(),n("button",{key:0,onClick:I=>R(r),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 p-1 mr-2",title:"Edit Kelas"},[l(o(ne),{class:"h-5 w-5"})],8,Ce)):K("",!0),(T=D.value)!=null&&T.delete_kelas?(d(),n("button",{key:1,onClick:I=>O(r),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200 p-1",title:"Hapus Kelas"},[l(o(ue),{class:"h-5 w-5"})],8,De)):K("",!0)])])}),128))])])]),i.value&&i.value.links&&i.value.links.length>3?(d(),n("div",Me,[a("div",Se,[(d(!0),n(C,null,P(i.value.links,(r,_)=>(d(),n(C,{key:_},[r.url===null?(d(),n("div",{key:0,class:"mr-1 mb-1 px-3 py-2 text-sm leading-4 text-gray-400 dark:text-gray-500 border rounded dark:border-gray-600 select-none",innerHTML:r.label},null,8,Ve)):(d(),N(o(ee),{key:1,class:S(["mr-1 mb-1 px-3 py-2 text-sm leading-4 border rounded dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:border-indigo-500 dark:focus:border-indigo-700 focus:text-indigo-500 dark:focus:text-indigo-300",{"bg-indigo-500 text-white dark:bg-indigo-600 dark:text-white dark:border-indigo-700":r.active}]),href:r.url,innerHTML:r.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):K("",!0)])])]),l(H,{show:h.value,onClose:M,maxWidth:"xl"},{default:u(()=>[a("div",Be,[a("h2",$e,k(c.value?"Edit Kelas":"Tambah Kelas Baru"),1),a("form",{onSubmit:ae(q,["prevent"]),class:"space-y-6"},[a("div",null,[l(B,{for:"kelas_nama_kelas_modal",value:"Nama Kelas"}),l(V,{id:"kelas_nama_kelas_modal",type:"text",class:"mt-1 block w-full",modelValue:o(t).nama_kelas,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).nama_kelas=r),required:"",autofocus:""},null,8,["modelValue"]),l($,{class:"mt-2",message:o(t).errors.nama_kelas},null,8,["message"])]),a("div",null,[l(B,{for:"kelas_deskripsi_modal",value:"Deskripsi (Opsional)"}),se(a("textarea",{id:"kelas_deskripsi_modal","onUpdate:modelValue":e[2]||(e[2]=r=>o(t).deskripsi=r),rows:"3",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[te,o(t).deskripsi]]),l($,{class:"mt-2",message:o(t).errors.deskripsi},null,8,["message"])]),a("div",null,[l(B,{for:"kelas_biaya_spp_modal",value:"Biaya SPP Default (Opsional)"}),l(V,{id:"kelas_biaya_spp_modal",type:"number",step:"1000",class:"mt-1 block w-full",modelValue:o(t).biaya_spp_default,"onUpdate:modelValue":e[3]||(e[3]=r=>o(t).biaya_spp_default=r),placeholder:"Contoh: 300000"},null,8,["modelValue"]),l($,{class:"mt-2",message:o(t).errors.biaya_spp_default},null,8,["message"])]),a("div",Ee,[l(j,{onClick:M,type:"button"},{default:u(()=>e[10]||(e[10]=[p(" Batal ")])),_:1,__:[10]}),l(F,{class:S({"opacity-25":o(t).processing}),disabled:o(t).processing},{default:u(()=>[p(k(c.value?"Update Kelas":"Simpan Kelas"),1)]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"]),l(H,{show:f.value,onClose:e[5]||(e[5]=r=>f.value=!1),maxWidth:"md"},{default:u(()=>{var r;return[a("div",Te,[e[15]||(e[15]=a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Konfirmasi Hapus Kelas ",-1)),a("p",Ne,[e[11]||(e[11]=p(' Apakah Anda yakin ingin menghapus kelas "')),a("span",Pe,k((r=m.value)==null?void 0:r.nama_kelas),1),e[12]||(e[12]=p('"? Aksi ini tidak dapat dibatalkan. '))]),a("div",Fe,[l(j,{onClick:e[4]||(e[4]=_=>f.value=!1),type:"button"},{default:u(()=>e[13]||(e[13]=[p(" Batal ")])),_:1,__:[13]}),l(le,{onClick:W,class:S({"opacity-25":o(x).processing||o(t).processing}),disabled:o(x).processing||o(t).processing},{default:u(()=>e[14]||(e[14]=[p(" Hapus Kelas ")])),_:1,__:[14]},8,["class","disabled"])])])]}),_:1},8,["show"])]}),_:1})],64))}};export{aa as default};
