import{A as S}from"./AuthenticatedLayout-CoPbdDRU.js";import{G as T,k as y,o as L,Q as m,c as d,b as r,d as x,u as n,g as D,w as k,e as t,l as u,F as l,f,t as a,n as c,h,j as M,E as C,S as H}from"./app-Dk2poFpF.js";import{r as b}from"./ArrowPathIcon-CE34ljGF.js";import"./ApplicationLogo-Ba5RTNil.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Bm3xLEfu.js";import"./SecondaryButton-DgwrQ3xq.js";import"./DangerButton-dG3daeid.js";import"./ArrowPathIcon-CUF4SU5u.js";import"./CheckCircleIcon-B9W32SYq.js";import"./XCircleIcon-CBzpbkFQ.js";import"./UsersIcon-DnIsIyXg.js";import"./XMarkIcon-C3zYpZna.js";import"./ChevronDownIcon-DW9UqOnW.js";import"./ChevronRightIcon-CCAbuFeO.js";const N={class:"flex justify-between items-center"},E={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},V={class:"pb-12 pt-4"},A={class:"max-w-7xl mx-auto"},I={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},O={class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},F={class:"divide-y divide-gray-200 dark:divide-gray-700"},J={key:0},P={class:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white"},Q={class:"px-6 py-4 whitespace-nowrap text-sm"},$={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},G={class:"flex items-center"},U={class:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 mr-3"},W={class:"text-xs text-gray-500"},q={class:"px-6 py-4 text-xs max-w-sm text-gray-500 dark:text-gray-400 break-words"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},R={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},X={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-700"},Y={class:"flex flex-wrap -mb-1 justify-center"},Z=["innerHTML"],yt={__name:"Index",props:{jobBatches:Object,pageTitle:String},setup(g){const _=T(),v=g,p=y(()=>_.props.auth.user),o=y(()=>v.jobBatches||{data:[],links:[]}),w=s=>s==="finished"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":s==="processing"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":s==="failed"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400",j=s=>s?new Date(s).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return L(()=>{window.Echo&&p.value&&window.Echo.private(`App.Models.User.${p.value.id}`).listen(".mass-invoice.status",s=>{console.log("Job status event received on Jobs/Index page:",s),m.reload({preserveScroll:!0,only:["jobBatches"]})})}),(s,i)=>(r(),d(l,null,[x(n(D),{title:g.pageTitle},null,8,["title"]),x(S,null,{header:k(()=>[t("div",N,[t("h2",E,a(g.pageTitle),1),t("button",{onClick:i[0]||(i[0]=e=>n(m).reload({only:["jobBatches"]})),class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition"},[x(n(b),{class:"h-5 w-5 text-gray-500 dark:text-gray-400"})])])]),default:k(()=>[t("div",V,[t("div",A,[t("div",I,[t("div",O,[t("table",z,[i[2]||(i[2]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Nama Proses"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Progress"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Output / Hasil"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Dimulai Oleh"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Waktu Selesai")])],-1)),t("tbody",F,[!o.value.data||o.value.data.length===0?(r(),d("tr",J,i[1]||(i[1]=[t("td",{colspan:"6",class:"px-6 py-10 text-center text-sm text-gray-500 dark:text-gray-400"},"Tidak ada riwayat proses yang tercatat.",-1)]))):u("",!0),(r(!0),d(l,null,f(o.value.data,e=>(r(),d("tr",{key:e.id},[t("td",P,a(e.name),1),t("td",Q,[t("span",{class:c([w(e.status),"px-2.5 py-0.5 rounded-full text-xs font-semibold"])},[e.status==="processing"?(r(),h(n(b),{key:0,class:"h-4 w-4 inline-block mr-1 animate-spin"})):u("",!0),M(" "+a(e.status),1)],2)]),t("td",$,[t("div",G,[t("div",U,[t("div",{class:c(["h-2.5 rounded-full",{"bg-blue-600":e.status==="processing","bg-green-600":e.status==="finished","bg-red-600":e.status==="failed"}]),style:C({width:e.progress+"%"})},null,6)]),t("span",null,a(e.progress)+"%",1)]),t("span",W,a(e.processed_items)+" / "+a(e.total_items)+" item",1)]),t("td",q,a(e.output),1),t("td",K,a(e.user_name),1),t("td",R,a(j(e.finished_at)),1)]))),128))])])]),o.value.links&&o.value.links.length>3?(r(),d("div",X,[t("div",Y,[(r(!0),d(l,null,f(o.value.links,(e,B)=>(r(),d(l,{key:B},[e.url===null?(r(),d("div",{key:0,class:"mr-1 mb-1 px-3 py-2 text-sm leading-4 text-gray-400 dark:text-gray-500 border rounded dark:border-gray-600 select-none",innerHTML:e.label},null,8,Z)):(r(),h(n(H),{key:1,class:c(["mr-1 mb-1 px-3 py-2 text-sm leading-4 border rounded dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:border-indigo-500 dark:focus:border-indigo-700 focus:text-indigo-500 dark:focus:text-indigo-300",{"bg-indigo-500 text-white dark:bg-indigo-600 dark:text-white dark:border-indigo-700":e.active}]),href:e.url,innerHTML:e.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):u("",!0)])])])]),_:1})],64))}};export{yt as default};
