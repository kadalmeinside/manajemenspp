import{c as n,b as i,e,l as N,F as h,f as D,h as R,n as j,u as o,S as Q,G as W,k as T,r as V,x as z,d as l,g as G,w as u,t as d,m as Y,C as f,D as B,L as Z,H as S,j as v,Q as J}from"./app-PnW9LIMI.js";import{A as X}from"./AuthenticatedLayout-CDlr9DUS.js";import{_ as $,a as A}from"./SecondaryButton-n7TCxxEi.js";import{P as U}from"./PrimaryButton-BY0ysqHt.js";import{D as ee}from"./DangerButton-Bk_8Ku1E.js";import{_ as p,a as b,b as c}from"./TextInput-BN2en4en.js";import{_ as te}from"./Toast-D6SnPC2b.js";import"./ApplicationLogo-BMKIStDY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CNCZznYC.js";import"./ArrowPathIcon-DzEl92JI.js";import"./CheckCircleIcon-vDFiebM4.js";import"./XCircleIcon-Tl2Zbwrj.js";import"./UsersIcon-BG3Ydj_B.js";import"./XMarkIcon-0-jXKLse.js";import"./ChevronDownIcon-BBo6p78g.js";import"./ChevronRightIcon-CByMJu6W.js";import"./InformationCircleIcon-BmX8MM4K.js";import"./ExclamationTriangleIcon-CHbeUP0g.js";import"./CheckCircleIcon-BTSg52qr.js";function ae(m,k){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function se(m,k){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function le(m,k){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const oe={key:0,class:"flex flex-wrap -mb-1 mt-6"},re=["innerHTML"],ie={__name:"Pagination",props:{links:Array},setup(m){return(k,L)=>m.links.length>3?(i(),n("div",oe,[(i(!0),n(h,null,D(m.links,(g,_)=>(i(),n(h,{key:_},[g.url===null?(i(),n("div",{key:0,class:"mr-1 mb-1 px-3 py-2 text-sm leading-4 text-gray-400 dark:text-gray-500 border rounded dark:border-gray-600",innerHTML:g.label},null,8,re)):(i(),R(o(Q),{key:1,class:j(["mr-1 mb-1 px-3 py-2 text-sm leading-4 border rounded dark:border-gray-600 hover:bg-white dark:hover:bg-gray-700 focus:border-indigo-500 dark:focus:border-indigo-700 focus:text-indigo-500 dark:focus:text-indigo-300",{"bg-indigo-500 text-white dark:bg-indigo-600 dark:text-white dark:border-indigo-700":g.active}]),href:g.url,innerHTML:g.label,"preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])):N("",!0)}},ne={class:"flex justify-between items-center"},de={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},me={class:"py-6 max-w-7xl mx-auto sm:px-6 lg:px-8"},ue={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg"},pe={class:"overflow-x-auto"},ge={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ce={class:"divide-y divide-gray-200 dark:divide-gray-700"},ke={key:0},_e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ye={key:0,class:"font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},fe={key:1,class:"text-gray-400 italic"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},he={key:0},we={key:1},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm"},Me={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},De=["onClick"],Le=["onClick"],Pe={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6 border-b pb-3 dark:border-gray-700"},Te={class:"space-y-6"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se=["value"],$e={class:"flex items-center space-x-2"},Ae={class:"mt-2 flex items-center space-x-4"},Ue={class:"flex items-center"},Ne={class:"flex items-center"},je={class:"mt-6 flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"},qe={class:"p-6"},He={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},Ke={class:"mt-6 flex justify-end space-x-3"},it={__name:"Index",props:{pageTitle:String,promoList:Object,allKelas:Array},setup(m){const k=W(),L=T(()=>{var r;return(r=k.props.flash)==null?void 0:r.message}),g=T(()=>{var r;return((r=k.props.flash)==null?void 0:r.type)||"info"}),_=V(!1),y=V(!1),x=V(null),C=V(!1),t=z({id_kelas:"",nama_promo:"",kode_promo:"",tipe_diskon:"tetap",nilai_diskon:0,tanggal_mulai:"",tanggal_berakhir:null,berlaku_selamanya:!1,is_active:!0}),q=()=>{y.value=!1,t.reset(),t.is_active=!0,t.tipe_diskon="tetap",_.value=!0},H=r=>{y.value=!0,x.value=r,t.id_kelas=r.id_kelas,t.nama_promo=r.nama_promo,t.kode_promo=r.kode_promo,t.tipe_diskon=r.tipe_diskon,t.nilai_diskon=r.nilai_diskon,t.tanggal_mulai=r.tanggal_mulai,t.tanggal_berakhir=r.tanggal_berakhir,t.berlaku_selamanya=r.tanggal_berakhir===null,t.is_active=r.is_active,_.value=!0},w=()=>{_.value=!1,t.reset(),t.clearErrors()},K=()=>{t.berlaku_selamanya&&(t.tanggal_berakhir=null),y.value?t.put(route("admin.promos.update",x.value.id),{onSuccess:()=>w()}):t.post(route("admin.promos.store"),{onSuccess:()=>w()})},E=r=>{x.value=r,C.value=!0},M=()=>{C.value=!1,x.value=null},F=()=>{J.delete(route("admin.promos.destroy",x.value.id),{onSuccess:()=>M()})},I=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),P=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-";return(r,a)=>(i(),n(h,null,[l(o(G),{title:m.pageTitle},null,8,["title"]),l(X,null,{header:u(()=>[e("div",ne,[e("h2",de,d(m.pageTitle),1),l(U,{onClick:q},{default:u(()=>[l(o(se),{class:"h-5 w-5 mr-2"}),a[10]||(a[10]=v(" Tambah Promo "))]),_:1,__:[10]})])]),default:u(()=>[l(te,{message:L.value,type:g.value},null,8,["message","type"]),e("div",me,[e("div",ue,[e("div",pe,[e("table",ge,[a[12]||(a[12]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Promo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Kode"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Kelas"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Diskon"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Periode Aktif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi")])],-1)),e("tbody",ce,[m.promoList.data.length===0?(i(),n("tr",ke,a[11]||(a[11]=[e("td",{colspan:"7",class:"px-6 py-10 text-center text-gray-500"},"Belum ada data promo.",-1)]))):N("",!0),(i(!0),n(h,null,D(m.promoList.data,s=>(i(),n("tr",{key:s.id},[e("td",_e,d(s.nama_promo),1),e("td",xe,[s.kode_promo?(i(),n("span",ye,d(s.kode_promo),1)):(i(),n("span",fe,"Otomatis"))]),e("td",ve,d(s.kelas.nama_kelas),1),e("td",be,[s.tipe_diskon==="persen"?(i(),n("span",he,d(s.nilai_diskon)+"%",1)):(i(),n("span",we,d(I(s.nilai_diskon)),1))]),e("td",Ve,d(P(s.tanggal_mulai))+" - "+d(s.tanggal_berakhir?P(s.tanggal_berakhir):"Selamanya"),1),e("td",Ce,[e("span",{class:j(["px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(s.is_active?"Aktif":"Tidak Aktif"),3)]),e("td",Me,[e("button",{onClick:O=>H(s),class:"text-indigo-600 hover:text-indigo-900"},[l(o(ae),{class:"h-5 w-5"})],8,De),e("button",{onClick:O=>E(s),class:"text-red-600 hover:text-red-900"},[l(o(le),{class:"h-5 w-5"})],8,Le)])]))),128))])])]),l(ie,{links:m.promoList.links,class:"p-6"},null,8,["links"])])]),l($,{show:_.value,onClose:w,maxWidth:"2xl"},{default:u(()=>[e("form",{onSubmit:Y(K,["prevent"]),class:"p-6"},[e("h2",Pe,d(y.value?"Edit Promo":"Tambah Promo Baru"),1),e("div",Te,[e("div",Be,[e("div",null,[l(p,{for:"nama_promo",value:"Nama Promo",required:""}),l(b,{id:"nama_promo",modelValue:o(t).nama_promo,"onUpdate:modelValue":a[0]||(a[0]=s=>o(t).nama_promo=s),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(c,{message:o(t).errors.nama_promo,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"kode_promo",value:"Kode Promo (Opsional)"}),l(b,{id:"kode_promo",modelValue:o(t).kode_promo,"onUpdate:modelValue":a[1]||(a[1]=s=>o(t).kode_promo=s),type:"text",class:"mt-1 block w-full",placeholder:"Biarkan kosong untuk promo otomatis"},null,8,["modelValue"]),l(c,{message:o(t).errors.kode_promo,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"id_kelas",value:"Berlaku untuk Kelas",required:""}),f(e("select",{id:"id_kelas","onUpdate:modelValue":a[2]||(a[2]=s=>o(t).id_kelas=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[a[13]||(a[13]=e("option",{value:"",disabled:""},"Pilih Kelas",-1)),(i(!0),n(h,null,D(m.allKelas,s=>(i(),n("option",{key:s.id_kelas,value:s.id_kelas},d(s.nama_kelas),9,Se))),128))],512),[[B,o(t).id_kelas]]),l(c,{message:o(t).errors.id_kelas,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"tipe_diskon",value:"Tipe Diskon",required:""}),f(e("select",{id:"tipe_diskon","onUpdate:modelValue":a[3]||(a[3]=s=>o(t).tipe_diskon=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},a[14]||(a[14]=[e("option",{value:"tetap"},"Nominal Tetap (Rp)",-1),e("option",{value:"persen"},"Persentase (%)",-1)]),512),[[B,o(t).tipe_diskon]]),l(c,{message:o(t).errors.tipe_diskon,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"nilai_diskon",value:"Nilai Diskon",required:""}),l(b,{id:"nilai_diskon",modelValue:o(t).nilai_diskon,"onUpdate:modelValue":a[4]||(a[4]=s=>o(t).nilai_diskon=s),modelModifiers:{number:!0},type:"number",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(c,{message:o(t).errors.nilai_diskon,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"tanggal_mulai",value:"Tanggal Mulai",required:""}),l(b,{id:"tanggal_mulai",modelValue:o(t).tanggal_mulai,"onUpdate:modelValue":a[5]||(a[5]=s=>o(t).tanggal_mulai=s),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(c,{message:o(t).errors.tanggal_mulai,class:"mt-2"},null,8,["message"])]),e("div",null,[l(p,{for:"tanggal_berakhir",value:"Tanggal Berakhir (Opsional)"}),l(b,{id:"tanggal_berakhir",modelValue:o(t).tanggal_berakhir,"onUpdate:modelValue":a[6]||(a[6]=s=>o(t).tanggal_berakhir=s),type:"date",class:"mt-1 block w-full",disabled:o(t).berlaku_selamanya},null,8,["modelValue","disabled"]),l(c,{message:o(t).errors.tanggal_berakhir,class:"mt-2"},null,8,["message"])]),e("div",$e,[f(e("input",{id:"berlaku_selamanya","onUpdate:modelValue":a[7]||(a[7]=s=>o(t).berlaku_selamanya=s),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[Z,o(t).berlaku_selamanya]]),a[15]||(a[15]=e("label",{for:"berlaku_selamanya",class:"text-sm text-gray-700 dark:text-gray-300"},"Berlaku Selamanya",-1))]),e("div",null,[l(p,{value:"Status"}),e("div",Ae,[e("label",Ue,[f(e("input",{type:"radio","onUpdate:modelValue":a[8]||(a[8]=s=>o(t).is_active=s),value:!0,class:"text-indigo-600"},null,512),[[S,o(t).is_active]]),a[16]||(a[16]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Aktif",-1))]),e("label",Ne,[f(e("input",{type:"radio","onUpdate:modelValue":a[9]||(a[9]=s=>o(t).is_active=s),value:!1,class:"text-indigo-600"},null,512),[[S,o(t).is_active]]),a[17]||(a[17]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Tidak Aktif",-1))])])])])]),e("div",je,[l(A,{onClick:w,type:"button"},{default:u(()=>a[18]||(a[18]=[v("Batal")])),_:1,__:[18]}),l(U,{disabled:o(t).processing},{default:u(()=>[v(d(y.value?"Update Promo":"Simpan Promo"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show"]),l($,{show:C.value,onClose:M,maxWidth:"lg"},{default:u(()=>{var s;return[e("div",qe,[a[21]||(a[21]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Hapus Promo",-1)),e("p",He,' Anda yakin ingin menghapus promo "'+d((s=x.value)==null?void 0:s.nama_promo)+'"? Tindakan ini tidak dapat diurungkan. ',1),e("div",Ke,[l(A,{onClick:M},{default:u(()=>a[19]||(a[19]=[v("Batal")])),_:1,__:[19]}),l(ee,{onClick:F},{default:u(()=>a[20]||(a[20]=[v("Ya, Hapus")])),_:1,__:[20]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{it as default};
