import{x as E,r as S,c as n,b as d,d as t,u as r,g as D,w,l as y,e as a,t as g,j as m,S as $,m as q,C as N,D as L,n as v,F as T}from"./app-Cmjz_kjm.js";import{_ as B}from"./FormPageLayout-fUyClxXw.js";import{P as h}from"./PrimaryButton-CvSK1u4D.js";import{a as M,_ as W}from"./SecondaryButton-CtJiNsRs.js";import{_ as f,a as _,b as p}from"./TextInput-BplOqhyk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={key:0,class:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex flex-col items-center justify-center"},I={key:1,class:"text-center"},P={class:"mt-4 text-2xl font-semibold text-gray-900 dark:text-white"},U={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},z={class:"mt-6 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900 text-left"},K={class:"mt-2 space-y-2 text-sm text-gray-700 dark:text-gray-300"},H={class:"mt-8"},O={key:0,class:"p-4 bg-red-100 text-red-700 rounded-md"},F={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},R={class:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8"},G={class:"sm:col-span-2"},J=["value"],Q={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},X={class:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8"},Y={class:"sm:col-span-2"},Z={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},ee={class:"mt-6"},se={key:0,class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor"},ae={class:"pt-5 flex justify-end"},re={key:0},te={key:1},le={class:"p-6"},oe={key:0,class:"text-xs"},ie=["innerHTML"],ne={key:2,class:"mt-4 text-red-500"},de={class:"mt-6 flex justify-end space-x-3 border-t border-gray-200 dark:border-gray-700 pt-4"},_e={__name:"ReRegisterAcademy",props:{pageTitle:String,academyClass:Object,termsDocument:Object,errors:Object,flash:Object},setup(i){var b,x;const u=i,s=E({nama_siswa:"",tanggal_lahir:"",id_kelas:((b=u.academyClass)==null?void 0:b.id_kelas)||null,user_name:"",email_wali:"",nomor_telepon_wali:"",user_password:"",user_password_confirmation:"",terms:!1,legal_document_id:((x=u.termsDocument)==null?void 0:x.id)||null}),c=S(!1),V=o=>{s.terms&&o.target.tagName.toLowerCase()!=="button"||(c.value=!0)},j=()=>{s.terms=!0,c.value=!1},C=()=>{s.clearErrors();let o=!1;s.nama_siswa||(s.setError("nama_siswa","Nama Lengkap Siswa wajib diisi."),o=!0),s.tanggal_lahir||(s.setError("tanggal_lahir","Tanggal Lahir wajib diisi."),o=!0),s.id_kelas||(s.setError("id_kelas","Silakan pilih cabang/kelas."),o=!0),s.user_name||(s.setError("user_name","Nama Lengkap Wali wajib diisi."),o=!0),s.email_wali||(s.setError("email_wali","Alamat Email Wali wajib diisi."),o=!0),s.nomor_telepon_wali||(s.setError("nomor_telepon_wali","Nomor WhatsApp Wali wajib diisi."),o=!0),s.user_password||(s.setError("user_password","Password wajib diisi."),o=!0),s.user_password&&s.user_password!==s.user_password_confirmation&&(s.setError("user_password_confirmation","Konfirmasi password tidak cocok."),o=!0),s.terms||(s.setError("terms","Anda harus menyetujui syarat dan ketentuan."),o=!0),!o&&s.post(route("re-register.store"),{onError:()=>{s.reset("user_password","user_password_confirmation")}})};return(o,e)=>(d(),n(T,null,[t(r(D),{title:i.pageTitle},null,8,["title"]),t(B,null,{header:w(()=>[m(g(i.pageTitle),1)]),default:w(()=>{var k;return[r(s).processing?(d(),n("div",A,e[17]||(e[17]=[a("svg",{class:"animate-spin h-10 w-10 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("p",{class:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300"},"Memproses Pendaftaran...",-1)]))):y("",!0),(k=u.flash)!=null&&k.success?(d(),n("div",I,[e[25]||(e[25]=a("svg",{class:"mx-auto h-16 w-16 text-green-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a("h3",P,g(u.flash.message),1),a("p",U,[e[18]||(e[18]=m(" Email konfirmasi berisi detail pendaftaran telah dikirim ke ")),a("strong",null,g(u.flash.completed_data.email_wali),1),e[19]||(e[19]=m(". "))]),a("div",z,[e[23]||(e[23]=a("h4",{class:"font-medium text-gray-800 dark:text-gray-200"},"Detail Pendaftaran:",-1)),a("ul",K,[a("li",null,[e[20]||(e[20]=a("strong",null,"NIS Baru:",-1)),m(" "+g(u.flash.completed_data.nis),1)]),a("li",null,[e[21]||(e[21]=a("strong",null,"Nama Siswa:",-1)),m(" "+g(u.flash.completed_data.nama_siswa),1)]),a("li",null,[e[22]||(e[22]=a("strong",null,"Nama Wali:",-1)),m(" "+g(u.flash.completed_data.nama_wali),1)])])]),a("div",H,[t(r($),{href:o.route("login"),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-red-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-red-700"},{default:w(()=>e[24]||(e[24]=[m(" Lanjut ke Halaman Login ")])),_:1,__:[24]},8,["href"])])])):(d(),n("form",{key:2,onSubmit:q(C,["prevent"]),novalidate:"",class:"space-y-6"},[i.errors.general?(d(),n("div",O,g(i.errors.general),1)):y("",!0),a("fieldset",F,[e[26]||(e[26]=a("legend",{class:"text-lg font-medium text-gray-900 dark:text-white"},"1. Data Diri Siswa",-1)),a("div",R,[a("div",G,[t(f,{for:"nama_siswa",value:"Nama Lengkap Siswa",required:""}),t(_,{id:"nama_siswa",modelValue:r(s).nama_siswa,"onUpdate:modelValue":e[0]||(e[0]=l=>r(s).nama_siswa=l),onInput:e[1]||(e[1]=l=>r(s).clearErrors("nama_siswa")),type:"text",class:"mt-1 block w-full",placeholder:"Cth: Budi Santoso",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.nama_siswa,class:"mt-2"},null,8,["message"])]),a("div",null,[t(f,{for:"tanggal_lahir",value:"Tanggal Lahir",required:""}),t(_,{id:"tanggal_lahir",modelValue:r(s).tanggal_lahir,"onUpdate:modelValue":e[2]||(e[2]=l=>r(s).tanggal_lahir=l),onInput:e[3]||(e[3]=l=>r(s).clearErrors("tanggal_lahir")),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.tanggal_lahir,class:"mt-2"},null,8,["message"])]),a("div",null,[t(f,{for:"id_kelas",value:"Kelas Akademi"}),N(a("select",{id:"id_kelas","onUpdate:modelValue":e[4]||(e[4]=l=>r(s).id_kelas=l),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:""},[a("option",{value:u.academyClass.id_kelas},g(u.academyClass.nama_kelas),9,J)],512),[[L,r(s).id_kelas]]),t(p,{message:r(s).errors.id_kelas,class:"mt-2"},null,8,["message"])])])]),a("fieldset",Q,[e[27]||(e[27]=a("legend",{class:"text-lg font-medium text-gray-900 dark:text-white"},"2. Data Wali & Akun Login",-1)),a("div",X,[a("div",null,[t(f,{for:"user_name",value:"Nama Lengkap Wali",required:""}),t(_,{id:"user_name",modelValue:r(s).user_name,"onUpdate:modelValue":e[5]||(e[5]=l=>r(s).user_name=l),onInput:e[6]||(e[6]=l=>r(s).clearErrors("user_name")),type:"text",class:"mt-1 block w-full",placeholder:"Cth: Ayah Budi",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.user_name,class:"mt-2"},null,8,["message"])]),a("div",null,[t(f,{for:"nomor_telepon_wali",value:"Nomor WhatsApp Wali",required:""}),t(_,{id:"nomor_telepon_wali",modelValue:r(s).nomor_telepon_wali,"onUpdate:modelValue":e[7]||(e[7]=l=>r(s).nomor_telepon_wali=l),onInput:e[8]||(e[8]=l=>r(s).clearErrors("nomor_telepon_wali")),type:"tel",class:"mt-1 block w-full",placeholder:"Cth: 081234567890",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.nomor_telepon_wali,class:"mt-2"},null,8,["message"])]),a("div",Y,[t(f,{for:"email_wali",value:"Alamat Email Wali (untuk login)",required:""}),t(_,{id:"email_wali",modelValue:r(s).email_wali,"onUpdate:modelValue":e[9]||(e[9]=l=>r(s).email_wali=l),onInput:e[10]||(e[10]=l=>r(s).clearErrors("email_wali")),type:"email",class:"mt-1 block w-full",placeholder:"Cth: wali.budi@email.com",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.email_wali,class:"mt-2"},null,8,["message"])]),a("div",null,[t(f,{for:"user_password",value:"Buat Password",required:""}),t(_,{id:"user_password",modelValue:r(s).user_password,"onUpdate:modelValue":e[11]||(e[11]=l=>r(s).user_password=l),onInput:e[12]||(e[12]=l=>r(s).clearErrors("user_password")),type:"password",class:"mt-1 block w-full",placeholder:"••••••••",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.user_password,class:"mt-2"},null,8,["message"])]),a("div",null,[t(f,{for:"user_password_confirmation",value:"Konfirmasi Password",required:""}),t(_,{id:"user_password_confirmation",modelValue:r(s).user_password_confirmation,"onUpdate:modelValue":e[13]||(e[13]=l=>r(s).user_password_confirmation=l),onInput:e[14]||(e[14]=l=>r(s).clearErrors("user_password_confirmation")),type:"password",class:"mt-1 block w-full",placeholder:"••••••••",required:""},null,8,["modelValue"]),t(p,{message:r(s).errors.user_password_confirmation,class:"mt-2"},null,8,["message"])])])]),a("fieldset",Z,[e[30]||(e[30]=a("legend",{class:"text-lg font-medium text-gray-900 dark:text-white"},"3. Persetujuan",-1)),a("div",ee,[a("div",{onClick:V,class:"flex items-center cursor-pointer group"},[a("div",{class:v(["h-4 w-4 rounded border flex items-center justify-center transition-all",r(s).terms?"bg-red-600 border-red-700":"bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 group-hover:border-red-500"])},[r(s).terms?(d(),n("svg",se,e[28]||(e[28]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)]))):y("",!0)],2),e[29]||(e[29]=a("span",{class:"ml-3 text-sm text-gray-600 dark:text-gray-400"},[m(" Saya menyetujui "),a("button",{type:"button",class:"font-medium text-red-600 hover:underline"},"syarat dan ketentuan"),m(" yang berlaku. ")],-1))]),t(p,{message:r(s).errors.terms||r(s).errors.legal_document_id,class:"mt-2"},null,8,["message"])])]),a("div",ae,[t(h,{class:v(["w-full justify-center text-lg bg-red-600 hover:bg-red-700 focus:ring-red-500",{"opacity-50 cursor-not-allowed":!r(s).terms}]),disabled:r(s).processing||!r(s).terms},{default:w(()=>[r(s).processing?(d(),n("span",re,"Menyimpan...")):(d(),n("span",te,"Simpan Data Siswa"))]),_:1},8,["disabled","class"])])],32))]}),_:1}),t(W,{show:c.value,onClose:e[16]||(e[16]=k=>c.value=!1),maxWidth:"2xl"},{default:w(()=>[a("div",le,[e[33]||(e[33]=a("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Syarat dan Ketentuan",-1)),i.termsDocument?(d(),n("div",oe,g(i.termsDocument.name)+" (v"+g(i.termsDocument.version)+")",1)):y("",!0),i.termsDocument?(d(),n("div",{key:1,class:"mt-4 prose prose-sm max-w-none text-gray-600 dark:text-gray-300 overflow-y-auto max-h-[60vh]",innerHTML:i.termsDocument.content},null,8,ie)):(d(),n("div",ne,"Gagal memuat Syarat & Ketentuan. Silakan coba lagi nanti.")),a("div",de,[t(M,{onClick:e[15]||(e[15]=k=>c.value=!1)},{default:w(()=>e[31]||(e[31]=[m("Tidak Setuju")])),_:1,__:[31]}),t(h,{onClick:j,class:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:!i.termsDocument},{default:w(()=>e[32]||(e[32]=[m("Setuju")])),_:1,__:[32]},8,["disabled"])])])]),_:1},8,["show"])],64))}};export{_e as default};
